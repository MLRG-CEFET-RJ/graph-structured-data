# Bandwidth minimization

The bandwidth minimization problem consists in relabeling the Nodes in a Graph, in a way that when this graph is represented in a form of an adjacency matrix, the non-zero values are near the main diagonal. This folder contains files just like the 'exact_bandwidth' folder, but executes in a minor scale, processing graphs of 3, 5 until 7 vertices or nodes, this is in order to help us understand the process.This example uses functions very similar to those developed by Augusto Fonseca, with some changes, such as passing a CLI number argument to allow parameterization for example.

The process is the same as in the exact_bandwidth folder:

- **The first step requires a Ubuntu/Linux machine**

1 - Execute **opt_band_example.py** (with number 3, 5 or 7 as required CLI argument, exact_bandwidth is set up for 10 nodes) to calculate the optimal band of the Graph.

2 - Execute **build_dataset_v2_example.py** to build the opt_band_n_nodes_graph_example.csv dataset. This is the Graphs in the form of adjacency matrix

Now, since the dataset is available, we can run the Neural Network.

3 - Execute **neural_network_v2_example.ipynb** jupyter notebook to run the neural network. This will make use of the Features and Labels in the "opt_band_10_nodes_graph.csv" data since it is a Supervised learning.

## More detailed file descriptions

### About the data

All the data came from a C, library Nauty and Traces, this software generates the ".g6" files, a ".g6" file is considered a block of graphs. The python library, `NetworkX`, handles reading that data, thus, each block is a `list` of graphs. Each graph in that list is unique in terms of its structure, it means all graphs are non-isomorphic, the blocks are different from each other as well.

Graphs with less number of nodes, like 3 nodes, 5 nodes, 7 and 9, only have 1 block (one ".g6" file) containing a list of graphs, for 10 nodes, since we are handling with ... Graphs, the files were partitioned, all the python scripts are suited to handle multiple ".g6" files for a specific number of nodes.

To get started with the data, we recommend taking a look in the bandwidth_visualizer.ipynb notebook.

### opt_band_example.py

This file will generate txt (a text represented Graph) files in the "txt*graphs_files_example" folder, this is required since a C software, CPLEX Optimizer (`MBandwidth`), uses these files to return the optimal sequence of a Graph. The output of this software is under the "opt_results/n_blocks'', thus, The optimal exact sequences for all non-isomorphic graphs of, for example, 5 nodes, is stored in the "optimalSequencse_n5_0.g6.txt file", under the "opt_results/n5_blocks". Therefore, this python script is responsible for building graphs represented as graphs and optimalSequences*_nodes_\__block_.g6.txt foe each block.

To be executed requires the number of nodes for all non-isomorphic graphs with n nodes and a flag to start a clean execution, deleting old files and generating new ones.

Usage example, for 5 nodes:

```shell
python opt_band_example.py 5 Y
```

### build_dataset_v2_example.py

This python file uses the optimalSequences\__nodes_\__blocks_.g6.txt files that were generated by opt_band_example.py, this is required to build the dataset. Using this data, it builds a CSV file in "../../datasets/examples/opt_band_n_nodes_graph.csv". This script is responsible for building the dataset to be used by the Neural Network, implemented with PyTorch.

Note that, if there is no optimalSequences\__nodes_\__block_.g6.txt under the respective folder, an error will raise.

The first CLI argument is the number of nodes and the second 1 or 0, is the verbose flag option.

Usage example, for 5 nodes:

```shell
python build_dataset_v2_example.py 5 0
```

### neural_network_v2_example.ipynb

The neural network is implemented with PyTorch, it uses the dataset generated by build_dataset_v2_example.py. It first loads the data in a way that is compatible to be passed to the DataLoader constructor, we are passing a List of tuples, the tuple's position 0 is the features, position 1 is the labels. You can interact with an instance of DataLoader using a "for x, y ... in DataloaderInstance" loop, x is the features and y the labels of a data. Once the data is set up, we define the model and train, validate and test the model.

## Scientific Research

The neural network applied for bandwidth minimization on Graphs is being developed during the Scientific Research at Federal Center for Technological Education of Rio de Janeiro. This Research is a continuation from ideas, methods, bibliography, programs, functions, datasets and everything related to the research developed by Augusto Jos√© Moreira da Fonseca as student and Eduardo Bezerra as Research advisor.

Felipe Curcio
felipe_nieto010@hotmail.com
